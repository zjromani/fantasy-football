<!doctype html>
<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}Fantasy AI Assistant{% endblock %}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#0f766e',
              secondary: '#0891b2',
            }
          }
        }
      }
    </script>
    <style>
      @keyframes slideIn {
        from { transform: translateY(-10px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }
      .slide-in { animation: slideIn 0.3s ease-out; }
      .loading { opacity: 0.6; pointer-events: none; }
    </style>
  </head>
  <body class="h-full bg-gradient-to-br from-slate-50 to-slate-100">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm border-b border-slate-200">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center space-x-8">
            <a href="/" class="flex items-center space-x-2">
              <svg class="w-8 h-8 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
              </svg>
              <span class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                Fantasy AI
              </span>
            </a>
            <div class="hidden md:flex space-x-4">
              <a href="/" class="text-slate-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition">
                ðŸ“¬ Inbox
              </a>
              <a href="/approvals" class="text-slate-700 hover:text-primary px-3 py-2 rounded-md text-sm font-medium transition relative">
                âœ… Approvals
                {% if pending_recs and pending_recs|int > 0 %}
                <span class="absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center">
                  {{ pending_recs }}
                </span>
                {% endif %}
              </a>
            </div>
          </div>
          <div class="flex items-center space-x-4">
            {% if unread and unread|int > 0 %}
            <span class="bg-red-500 text-white text-xs font-semibold px-2.5 py-1 rounded-full">
              {{ unread }} unread
            </span>
            {% endif %}
            <button onclick="location.reload()" class="text-slate-500 hover:text-slate-700 p-2 rounded-lg hover:bg-slate-100 transition">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
              </svg>
            </button>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      {% block content %}{% endblock %}
    </main>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed bottom-4 right-4 z-50 space-y-2"></div>

    <script>
      // Loading state for forms
      document.querySelectorAll('form').forEach(form => {
        form.addEventListener('submit', function(e) {
          const btn = this.querySelector('button[type="submit"]');
          if (btn && !btn.disabled) {
            btn.disabled = true;
            btn.classList.add('loading');
            btn.innerHTML = '<svg class="animate-spin h-4 w-4 inline mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Loading...';
          }
        });
      });

      // Toast notification system
      function showToast(message, type = 'info') {
        const toast = document.createElement('div');
        const colors = {
          success: 'bg-green-500',
          error: 'bg-red-500',
          info: 'bg-blue-500',
          warning: 'bg-yellow-500'
        };
        toast.className = `${colors[type] || colors.info} text-white px-6 py-3 rounded-lg shadow-lg slide-in max-w-sm`;
        toast.textContent = message;
        document.getElementById('toast-container').appendChild(toast);
        setTimeout(() => toast.remove(), 5000);
      }

      // Show toast on page load if there's a message in URL params
      const params = new URLSearchParams(window.location.search);
      if (params.get('success')) {
        showToast(params.get('success'), 'success');
      }
    </script>
  </body>
</html>


